var G=Object.defineProperty;var V=(e,r,t)=>r in e?G(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var R=(e,r,t)=>(V(e,typeof r!="symbol"?r+"":r,t),t);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(n){if(n.ep)return;n.ep=!0;const a=t(n);fetch(n.href,a)}})();var W=`attribute vec2 a_Position; 
attribute vec3 a_Color;\r
varying vec3 v_Color;\r
uniform mat4 u_vMatrix;\r
uniform mat4 u_pMatrix;\r
uniform mat4 u_mMatrix;

void main () {\r
    gl_Position = u_pMatrix * u_vMatrix * u_mMatrix * vec4(a_Position, 0.0, 1.0);\r
    v_Color = a_Color;\r
}`,$=`precision mediump float;\r
varying vec3 v_Color;

void main() {\r
    gl_FragColor = vec4(v_Color, 1.0);\r
}`,b=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,r=arguments.length;r--;)e+=arguments[r]*arguments[r];return Math.sqrt(e)});function M(){var e=new b(16);return b!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function F(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function p(e,r,t){var i=t[0],n=t[1],a=t[2],c,l,h,f,o,s,d,E,A,_,v,m;return r===e?(e[12]=r[0]*i+r[4]*n+r[8]*a+r[12],e[13]=r[1]*i+r[5]*n+r[9]*a+r[13],e[14]=r[2]*i+r[6]*n+r[10]*a+r[14],e[15]=r[3]*i+r[7]*n+r[11]*a+r[15]):(c=r[0],l=r[1],h=r[2],f=r[3],o=r[4],s=r[5],d=r[6],E=r[7],A=r[8],_=r[9],v=r[10],m=r[11],e[0]=c,e[1]=l,e[2]=h,e[3]=f,e[4]=o,e[5]=s,e[6]=d,e[7]=E,e[8]=A,e[9]=_,e[10]=v,e[11]=m,e[12]=c*i+o*n+A*a+r[12],e[13]=l*i+s*n+_*a+r[13],e[14]=h*i+d*n+v*a+r[14],e[15]=f*i+E*n+m*a+r[15]),e}function x(e,r,t){var i=t[0],n=t[1],a=t[2];return e[0]=r[0]*i,e[1]=r[1]*i,e[2]=r[2]*i,e[3]=r[3]*i,e[4]=r[4]*n,e[5]=r[5]*n,e[6]=r[6]*n,e[7]=r[7]*n,e[8]=r[8]*a,e[9]=r[9]*a,e[10]=r[10]*a,e[11]=r[11]*a,e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}function O(e,r,t){var i=Math.sin(t),n=Math.cos(t),a=r[0],c=r[1],l=r[2],h=r[3],f=r[4],o=r[5],s=r[6],d=r[7];return r!==e&&(e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=a*n+f*i,e[1]=c*n+o*i,e[2]=l*n+s*i,e[3]=h*n+d*i,e[4]=f*n-a*i,e[5]=o*n-c*i,e[6]=s*n-l*i,e[7]=d*n-h*i,e}function q(e,r,t,i,n){var a=1/Math.tan(r/2),c;return e[0]=a/t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,n!=null&&n!==1/0?(c=1/(i-n),e[10]=(n+i)*c,e[14]=2*n*i*c):(e[10]=-1,e[14]=-2*i),e}var X=q;class z{constructor(r,t){R(this,"canvas");R(this,"gl");R(this,"program",null);R(this,"ctx2d");this.canvas=r;const i=r.getContext("webgl");if(!i)throw new Error("Cannot get canvas context");this.gl=i;const n=t.getContext("2d");if(!n)throw new Error("Cannot get canvas context");this.ctx2d=n}createShader(r,t){const{gl:i}=this,n=i.createShader(r);if(!n)throw new Error("Error while create shader instance!");if(i.shaderSource(n,t),i.compileShader(n),i.getShaderParameter(n,i.COMPILE_STATUS)===null)throw new Error(`Error while compiling shader!Shader source: ${t}`);return n}createProgram(r,t){const{gl:i}=this,n=i.getShaderParameter(r,i.COMPILE_STATUS),a=i.getShaderParameter(t,i.COMPILE_STATUS);if(n===null||a===null)throw new Error(`Cannot create programm because of shader compile status is null: vertexShader: ${n}, fragmentShader: ${a}`);const c=i.createProgram();if(!c)throw new Error("Error while creating program!");return i.attachShader(c,r),i.attachShader(c,t),c}setup(){const{gl:r}=this,t=this.createShader(r.VERTEX_SHADER,W),i=this.createShader(r.FRAGMENT_SHADER,$),n=this.createProgram(t,i);r.linkProgram(n),r.useProgram(n),this.program=n}createRectangle(){const{gl:r}=this,t=r.createBuffer();r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t);const i=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,i);const n=new Float32Array([-1,1,1,1,-1,-1,1,-1]);r.bufferData(r.ARRAY_BUFFER,n,r.STATIC_DRAW);const a=new Uint16Array([0,1,2,1,2,3]);r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t),r.bufferData(r.ELEMENT_ARRAY_BUFFER,a,r.STATIC_DRAW);const c=r.createBuffer(),l=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0]);return r.bindBuffer(r.ARRAY_BUFFER,c),r.bufferData(r.ARRAY_BUFFER,l,r.STATIC_DRAW),{FACES_BUFFER:t,VERTEX_BUFFER:i,COLOR_BUFFER:c}}clearCanvas(){const{gl:r}=this;r.clearColor(1,1,1,1),r.clear(r.COLOR_BUFFER_BIT)}render(r){console.log(r);const{gl:t}=this;if(!this.program)throw new Error("Cannot get programm.");const{program:i}=this,n=t.getAttribLocation(i,"a_Position"),a=t.getAttribLocation(i,"a_Color"),c=t.getUniformLocation(i,"u_vMatrix"),l=t.getUniformLocation(i,"u_pMatrix"),h=t.getUniformLocation(i,"u_mMatrix");t.enableVertexAttribArray(n),t.enableVertexAttribArray(a);const f=M();X(f,40,this.canvas.width/this.canvas.height,0,100);const o=M(),s=M(),{FACES_BUFFER:d,VERTEX_BUFFER:E,COLOR_BUFFER:A}=this.createRectangle();t.bindBuffer(t.ARRAY_BUFFER,E),t.vertexAttribPointer(n,2,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,A),t.vertexAttribPointer(a,3,t.FLOAT,!1,0,0),F(o),F(s),p(o,o,[0,0,-1]);const _=()=>{for(let g=0;g<12;g++)F(s),O(s,s,Math.PI/180*30*g),g%3===0?(p(s,s,[1.5,0,0]),x(s,s,[.3,.05,1])):(p(s,s,[1.4,0,0]),x(s,s,[.2,.03,1])),t.uniformMatrix4fv(c,!1,o),t.uniformMatrix4fv(l,!1,f),t.uniformMatrix4fv(h,!1,s),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)};function v(){function g(U,H){const L={hour:{length:.4,width:.02},minute:{length:.6,width:.02},second:{length:.7,width:.01}};F(s),O(s,s,Math.PI/180*(90-H)),x(s,s,[L[U].length,L[U].width,0]),p(s,s,[1,0,0]),t.uniformMatrix4fv(c,!1,o),t.uniformMatrix4fv(l,!1,f),t.uniformMatrix4fv(h,!1,s),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)}const w=new Date;let S=w.getHours();S>12&&(S-=12);const u=360/12,B=w.getMinutes(),P=w.getSeconds(),I=w.getMilliseconds(),N=360/60*P+I*.006,D=360/60*B+P*.1,Y=S*u+B*(u/60);g("hour",Y),g("minute",D),g("second",N)}const m=()=>{this.clearCanvas(),_(),v(),window.requestAnimationFrame(m.bind(this))};m(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,d),t.flush()}play(r=0){this.render(r)}}const C=document.getElementById("canvas");C.width=window.innerWidth;C.height=window.innerHeight;const T=document.getElementById("canvas_text");T.width=window.innerWidth;T.height=window.innerHeight;const y=new z(C,T);y.setup();y.play();console.log(y);
//# sourceMappingURL=index-b62387ab.js.map
